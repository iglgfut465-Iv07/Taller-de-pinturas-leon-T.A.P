<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>TALLER DE ARTE LEON</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:#121212;
    color:#fff;
}

/* HEADER */
header{
    text-align:center;
    padding:30px 20px;
    background: linear-gradient(135deg,#ff6f61,#de425b);
    border-radius:0 0 50px 50px;
}
header img{
    max-width:120px;
    border-radius:50%;
    border:3px solid #fff;
}
header h1{margin:5px 0;font-size:2.2em;}

/* ICONO AJUSTES */
#iconoAjustes{
    position: fixed;
    top:20px;
    right:20px;
    cursor:pointer;
    z-index:1000;
}
#iconoAjustes span{
    display:block;
    width:35px;
    height:5px;
    background:#ff9800;
    margin:5px 0;
    border-radius:5px;
}

/* PANEL AJUSTES */
#panelAjustes{
    position:fixed;
    top:60px;
    right:20px;
    background:#1e1e1e;
    padding:20px;
    border-radius:20px;
    width:320px;
    max-height:80vh;
    overflow-y:auto;
    display:none;
    z-index:1000;
}
#panelAjustes input, #panelAjustes select{
    width:100%;
    margin-bottom:10px;
    padding:8px;
    border-radius:10px;
    border:none;
}
#panelAjustes button{
    width:100%;
    padding:10px;
    border:none;
    border-radius:25px;
    background:#25d366;
    color:#fff;
    font-weight:bold;
    margin-bottom:10px;
}
#cerrarPanel{
    background:red;
    width:30px;
    height:30px;
    border-radius:50%;
    float:right;
}

/* GALERIA */
.galeria{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    gap:20px;
}
.cuadro{
    position:relative;
    border-radius:20px;
    overflow:hidden;
}
.cuadro img{
    width:100%;
    display:block;
    user-select:none;
    -webkit-user-drag:none;
}
.cuadro p{
    text-align:center;
    background:#121212;
    margin:0;
    padding:10px;
}

/* MARCA DE AGUA */
.marca-agua{
    position:absolute;
    bottom:10px;
    right:10px;
    background:rgba(0,0,0,0.4);
    color:#fff;
    padding:4px 8px;
    font-size:13px;
    border-radius:8px;
    pointer-events:none;
    text-shadow:0 0 5px #000;
}

/* PANTALLA EMERGENTE */
#pantallaEmergente{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.9);
    justify-content:center;
    align-items:center;
    z-index:2000;
}
#pantallaEmergente img{
    max-width:90%;
    max-height:80%;
}
#cerrarEmergente{
    position:absolute;
    top:20px;
    right:30px;
    font-size:30px;
    cursor:pointer;
}
</style>
</head>

<body>

<header>
    <img id="logo">
    <h1 id="nombreSitio">TALLER DE ARTE LEON</h1>
</header>

<div id="iconoAjustes" onclick="abrirPanelAdmin()">
    <span></span><span></span><span></span>
</div>

<div id="panelAjustes">
    <button id="cerrarPanel" onclick="cerrarPanel()">✖</button>
    <h3>Administrador</h3>

    <input type="text" id="nuevoNombre" placeholder="Nuevo nombre">
    <button onclick="cambiarNombre()">Actualizar Nombre</button>

    <input type="file" id="nuevoLogo" accept="image/*">
    <button onclick="cambiarLogo()">Actualizar Logo</button>

    <input type="file" id="nuevoCuadro" accept="image/*">
    <input type="number" id="precioCuadro" placeholder="Precio">
    <button onclick="subirCuadro()">Agregar Cuadro</button>

    <select id="cuadrosEliminar"></select>
    <button onclick="eliminarCuadro()">Eliminar Cuadro</button>

    <h4>Marca de Agua</h4>
    <input type="text" id="textoMarcaAgua" placeholder="Firma o marca">
    <button onclick="guardarMarcaAgua()">Guardar Marca de Agua</button>
</div>

<section>
    <h2>Cuadros en Venta</h2>
    <div class="galeria" id="galeria"></div>
</section>

<div id="pantallaEmergente">
    <span id="cerrarEmergente">✖</span>
    <img id="imagenEmergente">
</div>

<script>
const PASSWORD="admin123";
let marcaAgua = localStorage.getItem("marcaAgua") || "© Taller de Arte León";
let cuadros = JSON.parse(localStorage.getItem("cuadros")) || [];

function mostrarGaleria(){
    const g=document.getElementById("galeria");
    const s=document.getElementById("cuadrosEliminar");
    g.innerHTML="";
    s.innerHTML="";
    cuadros.forEach((c,i)=>{
        g.innerHTML+=`
        <div class="cuadro">
            <img src="${c.img}" onclick="abrirEmergente('${c.img}')" oncontextmenu="return false">
            <div class="marca-agua">${marcaAgua}</div>
            <p>${c.precio}</p>
        </div>`;
        s.innerHTML+=`<option value="${i}">Cuadro ${i+1}</option>`;
    });
    localStorage.setItem("cuadros",JSON.stringify(cuadros));
}

function guardarMarcaAgua(){
    const t=document.getElementById("textoMarcaAgua").value.trim();
    if(!t) return alert("Escriba un texto");
    marcaAgua=t;
    localStorage.setItem("marcaAgua",t);
    mostrarGaleria();
}

function abrirPanelAdmin(){
    if(prompt("Contraseña:")===PASSWORD)
        panelAjustes.style.display="block";
}
function cerrarPanel(){panelAjustes.style.display="none";}

function subirCuadro(){
    const f=nuevoCuadro.files[0];
    if(!f) return;
    const r=new FileReader();
    r.onload=()=>{cuadros.push({img:r.result,precio:"$"+precioCuadro.value});mostrarGaleria();}
    r.readAsDataURL(f);
}

function eliminarCuadro(){
    cuadros.splice(cuadrosEliminar.value,1);
    mostrarGaleria();
}

function abrirEmergente(src){
    imagenEmergente.src=src;
    pantallaEmergente.style.display="flex";
}
cerrarEmergente.onclick=()=>pantallaEmergente.style.display="none";

document.getElementById("textoMarcaAgua").value=marcaAgua;
mostrarGaleria();
</script>

</body>
</html>
